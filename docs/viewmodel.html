<!DOCTYPE html>
<html lang="en">

<head>
    <title>ViewModel - dknelsonWiki</title>
    <meta charset="utf-8" />
    <meta name="generator" content="Pelican" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/grids-responsive-min.css">

    <link
        href="https://fonts.googleapis.com/css?family=Fira+Code:wght@500|Fira+Sans+Condensed|Cantarell|VT323&display=swap"
        rel="stylesheet">

    <link type="text/css" href="/theme/css/sphenodon.css" rel="stylesheet">
    <link type="text/css" href="/theme/css/pygments.css" rel="stylesheet">

    <link rel="shortcut icon" href="/images/favicon.ico" />





<meta name="tags" content="kotlin" />

</head>

<body>
    <div id="layout" class="pure-g">

        <div class="sidebar pure-u-1 pure-u-md-5-24">
            <nav id="sidebar">
                <div class="sidebar-header">
<div class="sitename"><a href="/">dknelsonWiki</a></div>
<div><small></small></div>
<div>
  <small>
    <a href="/">Posts</a>
    &nbsp;&nbsp;|&nbsp;&nbsp;
    <!-- <a href="/pages/dailies">Dailies</a> -->
    <!-- &nbsp;&nbsp;|&nbsp;&nbsp;
    <a href="/feeds/all.rss.xml">RSS</a>
    <br> -->
    <a href="/categories">Categories</a>
    &nbsp;&nbsp;|&nbsp;&nbsp;
    <a href="/tags">Tags</a>
    &nbsp;&nbsp;|&nbsp;&nbsp;
    <a href="/archives">Archives</a>
  </small>
</div>
<br>                </div>
                <div class="sidebar-content">
                    <div class="toc"></div>
                </div>
                <div id="footer"><small>Powered by <a href="http://getpelican.com/">Pelican</a></small></div>
            </nav>
        </div>

        <nav class="phone-header">
<div class="sitename"><a href="/">dknelsonWiki</a></div>
<div><small></small></div>
<div>
  <small>
    <a href="/">Posts</a>
    &nbsp;&nbsp;|&nbsp;&nbsp;
    <!-- <a href="/pages/dailies">Dailies</a> -->
    <!-- &nbsp;&nbsp;|&nbsp;&nbsp;
    <a href="/feeds/all.rss.xml">RSS</a>
    <br> -->
    <a href="/categories">Categories</a>
    &nbsp;&nbsp;|&nbsp;&nbsp;
    <a href="/tags">Tags</a>
    &nbsp;&nbsp;|&nbsp;&nbsp;
    <a href="/archives">Archives</a>
  </small>
</div>
<br>        </nav>

        <div class="content pure-u-1 pure-u-md-4-5">
            <article>
<section id="content" class="body">
    <div class="marginnote">
        <hr>
        <div class="article-information">
            <div class="article-information-heading uppercase">Published</div>
            <time class="published" datetime="2022-07-26T00:00:00-06:00">
                Tue 26 July 2022
            </time>
            <div class="category">
                Category: <a href="/categories#kotlin-ref">kotlin</a>
            </div>
            <div class="tags">
                Tags:
                <a href="/tags#kotlin-ref">kotlin</a>
            </div>
        </div>
        <hr>
    </div>
    <header>
        <h1 class="entry-title">
            <a href="/viewmodel.html" rel="bookmark"
                title="Permalink to ViewModel">ViewModel</a>
        </h1>
    </header>
    <article class="article-content">
        <p>An architecture practice for separating data from UI. By extending the <code>ViewModel</code> class and instantiating via the <code>by viewModels()</code> <em>delegate</em>, data inside the ViewModel is automagically retained through configuration changes (Orientation, light/dark mode, etc.)</p>
<div class="highlight"><pre><span></span><code><span class="nb">+--------------------------------+------------------------------------------+</span>
<span class="c">|      UI Responsibilities       |       `ViewModel` Responsibilities       |</span>
<span class="nb">+--------------------------------+------------------------------------------+</span>
<span class="c">| `Activity` and `Fragment` are  | `ViewModel` is responsible for holding   |</span>
<span class="c">| responsible for drawing views  | and processing all the data needed for   |</span>
<span class="c">| and data to the screen and     | the UI</span><span class="nt">.</span><span class="c"> It should never access your view |</span>
<span class="c">| responding to user events      | hierarchy (like view binding object) or  |</span>
<span class="c">|                                | hold a reference to the activity or the  |</span>
<span class="c">|                                | fragment</span><span class="nt">.</span><span class="c">                                |</span>
<span class="nb">+--------------------------------+------------------------------------------+</span>
</code></pre></div>

<h3>Sidenote: Delegates</h3>
<blockquote>
<p><strong>Delegates</strong>: Property delegation in Kotlin helps you by handing off the getter-setter functionality to a different class. Defined using the <em><code>by</code></em> keyword. In this case, the <code>viewModels</code> delegate is what does the retaining through configuration changes.
<code>kotlin
var &lt;property-name&gt; : &lt;property-type&gt; by &lt;delegate-class&gt;()
//For example:
private val viewModel: GameViewModel by viewModels()</code></p>
</blockquote>
<h2>Backing Properties</h2>
<p>The correct practice for giving a private property a public getter that still limits access to the actual value. The convention is to prefix the private property with _</p>
<div class="highlight"><pre><span></span><code><span class="kd">private</span><span class="w"> </span><span class="kd">var</span><span class="w"> </span><span class="nv">_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>

<span class="kd">val</span><span class="w"> </span><span class="nv">count</span><span class="p">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">    </span><span class="k">get</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_count</span>
</code></pre></div>

<p>Thus, a <code>ViewModel</code> can hold the actual value, and the <code>View</code> that holds the <code>ViewModel</code> can access the property in a safe manner</p>
<blockquote>
<p><strong>Warning</strong>: Use this practice to ensure that mutable data inside your <code>ViewModel</code> is always private</p>
</blockquote>
<h2><code>ViewModel</code>'s Lifecycle</h2>
<p>The Android framework will keep the <code>ViewModel</code> alive as long as the scope of the <code>Activity</code> is alive, including a new instance of an <code>Activity</code> reconnecting to an existing <code>ViewModel</code>
<img src="https://developer.android.com/static/codelabs/basic-android-kotlin-training-viewmodel/img/18e67dc79f89d8a.png" width="500" /></p>
<h3>Sidenote: <code>lateinit</code></h3>
<p>In Kotlin, the <code>lateinit</code> keyword is used to promise the compiler that despite not giving a variable an initial value, you will give it one before trying to access it (typically inside <code>init</code>). Breaking this promise will cause the app to crash</p>
<h2>Adjacent: <code>MaterialAlertDialog</code></h2>
<p>A dialog is a popup window in the middle of the screen. Use <code>MaterialAlertDialogBuilder</code> to setup and configure the things that you want about the dialog, and calling <code>show()</code> at the end. Some of the configuration options include:
- <code>setTitle(String)</code>
- <code>setMessage(String)</code>
- <code>setCancelable(Boolean)</code>
- <code>setNegativeButton(String, DialogInterface.OnClickListener)</code>
- <code>setPositiveButton(String, DialogInterface.OnClickListener)</code></p>
<h2>Adjacent: <code>TextInputLayout</code> Error Options</h2>
<p>Material text fields contain built in ways to show something wrong with a text field, using the <code>isErrorEnabled</code> property in conjunction with <code>error</code></p>
    </article>
</section>
                <hr>
            </article>
        </div>
    </div> </body>

</html>